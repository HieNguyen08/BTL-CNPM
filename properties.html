<!DOCTYPE html>
<html class="login-pf">
<head>
    <title>Main</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .flex {
            display: flex;
            justify-content: space-between;
        }

        .printer-box,
        .page-setup-box,
        .instruction-box,
        .review-box {
            width: 300px;
            padding: 20px;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 20px;
        }

        .print-button {
            background-color: #5AF64C;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
	@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* CSS cho trạng thái loading overlay */
#loadingOverlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.8);
    z-index: 999;
    text-align: center;
}

#loadingOverlay img {
    margin-top: 20%;
    width: 100px;
    height: 100px;
    animation: spin 1s linear infinite; /* Áp dụng hiệu ứng quay */
}

#loadingOverlay p {
    margin-top: 10px;
    font-size: 18px;
    font-weight: bold;
    color: #333;
}

        .information-icon {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .information-icon i {
            margin-right: 5px;
        }

        .review-container {
            margin-top: 20px;
        }

        .review-item {
            border-bottom: 1px solid #ddd;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
	.collapsed {
    		height: 30px; /* Điều chỉnh chiều cao khi box được thu gọn */
    		overflow: hidden;
    		transition: height 0.3s ease;
    		cursor: pointer;
	}

	/* Định dạng khi box mở rộng */
	.instruction-box:not(.collapsed),
	.review-box:not(.collapsed) {
    		height: auto;
	}

        .comment-section {
            margin-top: 20px;
        }

        .comment-input {
            width: 100%;
            margin-bottom: 10px;
        }

        .star-rating {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .star {
            color: gold;
            cursor: pointer;
        }

        .printer-box h3,
        .page-setup-box h3 {
            margin-top: 0;
        }

        .printer-box p,
        .page-setup-box p {
            margin: 10px 0;
        }

        .page-setup-box label,
        .page-setup-box input,
        .page-setup-box select {
            margin-bottom: 10px;
        }

        .feature-box h3 {
            margin-top: 0;
        }
    </style>
</head>

<body style="overflow-y: auto; height: 100%;">
    <div class="flex">
        <div id="name" class="flex center">
            <a href="main.html"><img src="../logo.png" style="width: 50px;" draggable="false"></a>
            <p style="padding: 0px 50px">Nguyễn Văn A</p>
        </div>
        <a href="../login.html">
            <div id="kc-form-buttons" class="form-group">
                <input tabindex="4" class="logout center" type="submit" value="LOG OUT" />
            </div>
        </a>
    </div>

    <div>
        <div id="menu" class="flex center">
            <button id="popmenu" onclick="pop()" class="flex" style=" min-height: 2.5rem; min-width: 2.5rem; padding-top: 8px;">
                <span class="flex" style="pointer-events: none; justify-content: center;">
                    <svg style="position: absolute; padding-left: 20px;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="icon">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12h12M3 6h18M3 18h6"></path>
                    </svg>
                </span>
            </button>
            <div style="width: 100%; padding-right: 40px;" class="flex center">Menu of service</div>
        </div>
        <div class="select-dropdown flex" role="listbox" id="select-dropdown">
            <li style=" border-top-left-radius: 3px; border-bottom-left-radius: 3px;" class="selected"><a href="print.html">Print</a></li>
            <li><a href="log.html">Log</a></li>
            <li><a href="pay.html">Payment</a></li>
            <li style="border: none;"><a href="my.html">My Profile</a></li>
        </div>
    </div>

    <!-- Printer and Page Setup Boxes -->
    <div class="flex">
        <div class="printer-box">
            <h3>Printer</h3>
            <p id="printerName">Printer Name: Your Printer</p>
            <p id="printerID">Printer ID</p>
            <p id="printerLocation">Printer Location</p>
            <button class="print-button" onclick="confirmPrint()">
    		<i class="fa fa-print fa-2x" style="margin-bottom: 10px;"></i> Print
	    </button>
    <p id="lastAccessInfo">Lần truy cập gần nhất: <span id="lastAccessDate"></span></p>
    <button class="save-access-button" onclick="saveLastAccessInfo()">Lưu lần truy cập</button>
            <!-- Add more printer details as needed -->
        </div>

        <!-- Page Setup Box -->
        <div class="page-setup-box">
            <h3>Page Setup</h3>
            <label for="numPages">Number of Copies:</label>
            <input type="number" id="numPages" name="numPages" value="1">
            <br>
            <label for="Colour">Colour:</label>
            <select id="Colour" name="Colour">
                <option value="Yes">Yes</option>
                <option value="Half">Half</option>
                <option value="No">No</option>
            </select>
            <br>
            <label for="doubleSided">Double Sided:</label>
            <select id="doubleSided" name="doubleSided">
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
            <br>
            <label for="margins">Margins:</label>
            <select id="margins" name="margins">
                <option value="normal">Normal</option>
                <option value="narrow">Narrow</option>
                <option value="moderate">Moderate</option>
                <option value="wide">Wide</option>
               <option value="mirrored">Mirrored</option>
            </select>
            <br>
            <label for="pageSize">Page Size:</label>
            <select id="pageSize" name="pageSize">
                <option value="letter">Letter</option>
                <option value="a4">A4</option>
                <option value="a3">A3</option>
                <option value="a5">A5</option>
                <option value="a6">A6</option>
                <option value="b4">B4</option>
                <!-- Add more page size options as needed -->
            </select>
            <br>
            <label for="pageRange">Page Range:</label>
            <input type="text" id="pageRange" name="pageRange" placeholder="e.g., 1-5">
            <br>
            <div class="file-info" id="fileInfo">
                <h4>Uploaded File Information</h4>
                <p id="docName">Document Name: </p>
                <p id="docType">Document Type: </p>
                <p id="docSize">Document Size: </p>
            </div>
        </div>

        <!-- Hướng dẫn sử dụng Box -->
        <div class="instruction-box" id="instructionBox">
            <div class="information-icon" onclick="toggleBox('instructionBox')">
                <i class="fa fa-info-circle"></i>
                <h3>Hướng dẫn sử dụng</h3>
            </div>
            <p>Thông tin hướng dẫn cách sử dụng chức năng thiết kế in:</p>
        </div>

        <!-- Review Box -->
        <div class="review-box" id="reviewBox">
            <div class="information-icon" onclick="toggleBox('reviewBox')">
                <i class="fa fa-star"></i>
                <h3>Đánh giá 5 sao</h3>
            </div>
            <div class="review-container">
                <!-- Tài khoản và số sao -->
                <div class="review-item">
                    <div>Tài khoản A</div>
                    <div>⭐⭐⭐⭐⭐</div>
                </div>
                <div class="review-item">
                    <div>Tài khoản B</div>
                    <div>⭐⭐⭐⭐⭐</div>
                </div>
                <!-- Lời đánh giá -->
                <div class="comment-section">
                    <div class="comment-input" contenteditable="true" style="border: 1px solid black; padding: 4px; min-height: 50px;" placeholder="Viết đánh giá của bạn (tối đa 200 chữ)..."></div>
                    <div class="star-rating">
                        <div class="star" onclick="selectStar(1)">⭐</div>
                        <div class="star" onclick="selectStar(2)">⭐</div>
                        <div class="star" onclick="selectStar(3)">⭐</div>
                        <div class="star" onclick="selectStar(4)">⭐</div>
                        <div class="star" onclick="selectStar(5)">⭐</div>
                    </div>
                    <button onclick="confirmReview()">Gửi đánh giá</button>
                </div>
            </div>
        </div>
    </div>
<div id="loadingOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.8); z-index: 999; text-align: center;">
    <img src="D:\Downloads\icegif-1260.gif" alt="Loading..." style="margin-top: 20%; width: 100px; height: 100px;">
    <p>Đang in...</p>
</div>
</body>
        <script src="../main.js"></script>
        <script>
            // Mock data for printer and page setup
            const printerDetails = {
                name: 'Your Printer',
                // Add more printer details as needed
            };

            const pageSetup = {
                numPages: 1,
                doubleSided: true,
                margins: 'normal',
                pageSize: 'letter',
                // Add more page setup options as needed
            };

            // Mock data for additional features
            const additionalFeatures = {
                colorPrinting: true,
                pageRange: '',
                totalPages: 0,
                dataSize: '0 MB',
                docName: 'Untitled',
                docType: 'Unknown',
            };

            // Update printer box with dynamic data
            function updatePrinterBox() {
                const printerName = document.getElementById('printerName');
                printerName.textContent = `Printer Name: ${printerDetails.name}`;
                // Update other printer details as needed
            }

            // Update page setup box with dynamic data
            function updatePageSetupBox() {
                const numPagesInput = document.getElementById('numPages');
                const doubleSidedSelect = document.getElementById('doubleSided');
                const marginsSelect = document.getElementById('margins');
                const pageSizeSelect = document.getElementById('pageSize');

                numPagesInput.value = pageSetup.numPages;
                doubleSidedSelect.value = pageSetup.doubleSided.toString();
                marginsSelect.value = pageSetup.margins;
                pageSizeSelect.value = pageSetup.pageSize;
                // Update other page setup options as needed
            }

            // Update additional features box with dynamic data
            function updateAdditionalFeaturesBox() {
                const colorPrintingSelect = document.getElementById('colorPrinting');
                const pageRangeInput = document.getElementById('pageRange');
                const totalPagesSpan = document.getElementById('totalPages');
                const dataSizeSpan = document.getElementById('dataSize');
                const docNameSpan = document.getElementById('docName');
                const docTypeSpan = document.getElementById('docType');

                colorPrintingSelect.value = additionalFeatures.colorPrinting.toString();
                pageRangeInput.value = additionalFeatures.pageRange;
                totalPagesSpan.textContent = additionalFeatures.totalPages;
                dataSizeSpan.textContent = additionalFeatures.dataSize;
                docNameSpan.textContent = additionalFeatures.docName;
                docTypeSpan.textContent = additionalFeatures.docType;
            }
	    function toggleBox(boxId) {
    		const box = document.getElementById(boxId);
    		box.classList.toggle('collapsed');
	    }
	    // Khi trang được load, hiển thị thông tin lần truy cập gần nhất
window.onload = function () {
    displayLastAccessInfo();
};

// Hàm để hiển thị thông tin lần truy cập gần nhất
function displayLastAccessInfo() {
    const lastAccessInfo = getLastAccessInfo();
    if (lastAccessInfo) {
        // Hiển thị thông tin trong Printer Box
        document.getElementById('lastAccessDate').textContent = lastAccessInfo.lastAccessDate;
    }
}

// Hàm để lưu thông tin lần truy cập gần nhất vào Local Storage
function saveLastAccessInfo() {
    const lastAccessDate = new Date().toLocaleString();
    
    const lastAccessInfo = {
        lastAccessDate,
    };

    localStorage.setItem('lastAccessInfo', JSON.stringify(lastAccessInfo));

    // Hiển thị lại thông tin lần truy cập gần nhất
    displayLastAccessInfo();
}

            // Print Document Function
            function printDocument() {
                // Implement your print functionality here
		// Trừ số lượng giấy còn lại sau khi in
                alert('Printing document...');
            }

            // Confirm Print Function
            function confirmPrint() {
                const userConfirmed = confirm('Bạn chắc chắn muốn in?');
    if (userConfirmed) {
        // Gọi hàm để chuyển hướng và hiển thị trạng thái loading
        redirectToSuccessPage();
    }
// Thêm vào trong đoạn mã JavaScript của properties.html
function redirectToSuccessPage() {
    // Hiển thị trạng thái loading
    const loadingOverlay = document.getElementById('loadingOverlay');
    loadingOverlay.style.display = 'block';

    // Chờ một khoảng thời gian (ví dụ: 2 giây) để mô phỏng quá trình in
    setTimeout(function () {
        // Ẩn trạng thái loading
        loadingOverlay.style.display = 'none';

        // Chuyển hướng sang trang success.html
        window.location.href = 'success.html';
    }, 3000); // 2000 milliseconds = 2 seconds
}
            }
           // Hàm để lấy thông tin tài liệu từ sessionStorage
            function getUploadedFileInfo() {
                const uploadedFileJson = sessionStorage.getItem('uploadedFile');
                if (uploadedFileJson) {
                    const uploadedFile = JSON.parse(uploadedFileJson);
                    return uploadedFile;
                }
                return null;
            }
// Hàm chuyển đổi kích thước file từ bytes sang các đơn vị khác
function formatFileSize(bytes) {
    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];

    if (bytes === 0) return '0 Byte';
    
    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));

    return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
}

            // Hàm để hiển thị thông tin tài liệu trong Page Setup Box
            function displayUploadedFileInfo() {
    const uploadedFileInfo = getUploadedFileInfo();
    if (uploadedFileInfo) {
        const docNameSpan = document.getElementById('docName');
        const docTypeSpan = document.getElementById('docType');
        const docSizeSpan = document.getElementById('docSize');

        // Hiển thị thông tin tài liệu
        docNameSpan.textContent = `Document Name: ${uploadedFileInfo.name}`;
        docTypeSpan.textContent = `Document Type: ${uploadedFileInfo.type}`;
        
        // Chuyển đổi và hiển thị dung lượng file
        const formattedSize = formatFileSize(uploadedFileInfo.size);
        docSizeSpan.textContent = `Document Size: ${formattedSize}`;
    }
            }

            // Gọi hàm hiển thị thông tin tài liệu khi trang được load
            window.onload = function () {
                displayUploadedFileInfo();
            };
	
// Lưu trữ số sao được chọn
let selectedStar = 0;
// Thêm vào trong đoạn mã JavaScript của properties.html
function redirectToSuccessPage() {
    // Hiển thị trạng thái loading (nếu có)
    // ... code để hiển thị trạng thái loading

    // Chờ một khoảng thời gian (ví dụ: 2 giây) để mô phỏng quá trình in
    setTimeout(function () {
        // Chuyển hướng sang trang success.html
        window.location.href = 'success.html';
    }, 2000); // 2000 milliseconds = 2 seconds
}
// Hàm chọn số sao
function selectStar(star) {
    selectedStar = star;
    const stars = document.querySelectorAll('.star');
    stars.forEach((star, index) => {
        star.style.color = index < selectedStar ? 'gold' : 'black';
    });
}

// Hàm xác nhận và hiển thị thông báo đánh giá
function confirmReview() {
    const commentInput = document.querySelector('.comment-input');
    const comment = commentInput.textContent.trim(); // Lấy nội dung đánh giá

    if (selectedStar === 0) {
        alert('Vui lòng chọn số sao trước khi gửi đánh giá.');
        return;
    }

    if (comment === '') {
        alert('Vui lòng nhập đánh giá của bạn trước khi gửi.');
        return;
    }

    // Gửi đánh giá và số sao đến server hoặc xử lý theo nhu cầu cụ thể của bạn
    // Ở đây, chỉ hiển thị thông báo đánh giá trong console

    console.log(`Đánh giá: ${selectedStar} sao`);
    console.log(`Lời đánh giá: ${comment}`);

    // Thông báo thành công
    alert('Đánh giá của bạn đã được gửi thành công!');
}
            // Initial update of all boxes
            updatePrinterBox();
            updatePageSetupBox();

        </script>
    </body>
    <script src="../main.js"></script>
</html>
